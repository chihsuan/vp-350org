!function(t){var e=["China","Taiwan","Japan","Vietnam","North Korea","South Korea","Philippines","Thailand","Malaysia","Indonesia","Cambodia","Laos","Myanmar","Singapore","Brunei","East Timor","Mongolia"],n=["Vietnam"],a=$(t).width(),o=$(t).height(),r=d3.select("#east-asia-map").append("svg").attr("width",a).attr("height",o),i=500,s=a<600;s&&(i=300);var p=[107,25],c=d3.geo.mercator().scale(i).center(p).translate([a/2+10,o/2+50]),l=d3.geo.path().projection(c);d3.json("./data/countries.geo.topo.json",function(i,p){if(i)return console.error(i);var c=topojson.feature(p,p.objects["countries.geo"]).features;c=c.filter(function(t){return e.indexOf(t.properties.name)>-1}),r.append("g").attr("class","countries").selectAll("path").data(c).enter().append("path").attr("d",l).style("display",function(t){return e.indexOf(t.properties.name)>-1?"block":"none"}).style("cursor",function(t){if(n.indexOf(t.properties.name)>-1)return"pointer"}).on("mouseover",function(t){n.indexOf(t.properties.name)>-1&&d3.select(this).style("fill","rgb(193,39,45)").style("stroke","#b52626"),d3.select(".map-title").text(t.properties.name)}).on("mouseout",function(){d3.select(this).style("fill","").style("stroke",""),d3.select(".map-title").text("East Asia")}).on("click",function(){t.location.href="../"}),r.append("path").attr("class","country-borders").attr("d",l(topojson.mesh(p,p.objects["countries.geo"],function(t,n){return e.indexOf(t.properties.name)>-1&&t!==n}))),r.append("text").text("East Asia").attr("class","map-title").attr("y",function(){return s?"200px":o/5*3}).attr("x",function(){return s?a/2:a/6*5}).attr("text-anchor","middle")})}(window);